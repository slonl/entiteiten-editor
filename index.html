<!doctype html>
<html>
<head>
    <title>Entiteiten editor</title>
    <meta charset="utf-8">
    <link rel="stylesheet" href="css/styles.css">
    <style>
        html,body {
            padding: 0;
            margin: 0;
        }
        html {
            height: 100%;
        }
        body {
            min-height: 100%;
        }
        .slo-commit,
        .slo-new {
            width: 100%;
        }
        .slo-right {
            margin-left: 0;
        }
        .slo-entiteit-changes {
            overflow-y: auto;
        }
        .slo-title:empty:before {
            content: "(Geen titel)";
        }
        .slo-entiteit-changes a {
            color: inherit;
            padding: inherit;
        }
        .slo-entiteit-change .slo-type {
            margin-left: 5px;
            max-width: 170px;
        }
        .slo-entity-select {
            display: inline-flex;
            max-width: 200px;
            padding: 0;
            padding-right: 30px;
            margin: 0;
            height: 28px;
            margin-top: -2px;
        }
        .slo-id:empty:before {
            content: "(Nieuw UUID)";
        }
        .slo-warning:not(:empty) + .slo-warning {
            display: none;
        }
        .slo-label {
            display: inline-block;
        }
        .slo-form-help {
            font-size: 0.8em;
            line-height: 1.5em;
        }
        label.slo-form-checkbox,
        label.slo-form-radio {
            padding-left: 1.5em;
        }
        .slo-form-checkbox input[type="checkbox"],
        .slo-form-radio input[type="radio"] {
            margin-left: -1.5em;
            position: absolute;
        }
		textarea[data-simply-activate="autosize"] {
			height: var(--slo-line-height);
			resize: none;
		}
    </style>
</head>
<body class="slo-main-page">
    <header class="slo-navbar">
        <nav class="slo-navbar-left slo-logo bg-brand-gradient">
            <a href="/"><img src="/assets/img/slo.png"></a>
        </nav>
        <div class="slo-navbar-left">
            OpenData Portal: Entiteit toevoegen
        </div>
    </header>
    <div class="slo-navbar slo-navbar-side bg-gray">
        <div class="slo-space">
            <button data-simply-command="new" class="slo-button slo-new">Nieuwe entiteit</button>
            <p>
                Aangepaste Entiteiten
                <textarea placeholder="Commit message" data-simply-field="commitMessage"></textarea>
            </p>
            <p>
                <span data-simply-field="changeCount">0</span> aanpassingen
                <button data-simply-command="commit-changes" class="slo-button slo-commit">Verwerken</button>
            </p>
            <div class="slo-entiteit-changes" data-simply-list="changes">
                <template>
                    <div class="slo-entiteit-change">
                        <button data-simply-command="delete-change" class="slo-button slo-right">
                            <svg class="slo-icon slo-icon-feather">
                                <use xlink:href="/files/feather-sprite.svg#trash">
                                </use>
                            </svg>
                        </button>
                        <input type="checkbox" checked>
                        <span class="slo-title" data-simply-field="title"></span><br>
                        <span class="slo-type" data-simply-field="section"></span><br>
                        <a href="#" class="slo-uuid" data-simply-field="id" data-simply-transformer="editlink"></a>
                    </div>
                </template>
            </div>
        </div>
    </div>
    <template id="relatie">
        <div class="slo-entiteit-relatie">
            <button data-simply-command="delete-relation" class="slo-button slo-right">
                <svg class="slo-icon slo-icon-feather">
                    <use xlink:href="/files/feather-sprite.svg#trash">
                    </use>
                </svg>
            </button>
            <span data-simply-field="relatie" data-simply-transformer="idToTitle"></span><br>
            <a href="#" data-simply-field="relatie" data-simply-transformer="editlink"></a>
        </div>
    </template>
    <template id="entiteit-vakkencluster">
        <div class="slo-entity">
            <label>Titel
                <textarea data-simply-activate="autosize" data-simply-field="entity.title" placeholder="Entiteit titel"></textarea>
            </label>
            <label>Omschrijving
                <textarea data-simply-activate="autosize" data-simply-field="entity.description" placeholder="Entiteit omschrijving"></textarea>
            </label>
            <label>Vakken</label>
            <div class="slo-entiteit-relaties" data-simply-list="entity.vak_id" data-simply-entry="relatie">
                <template rel="relatie"></template>
            </div>
            <form data-simply-command="add-relation" data-slo-relation="vak_id" class="slo-search slo-grid slo-grid-3">
                <input class="slo-grid-span-2" placeholder="Entiteit UUID / tekst" list="vak">
                <button data-simply-command="add-relation" data-slo-relation="vak_id" class="slo-button-nomargin slo-button">Toevoegen</button>
            </form>
            <label>Niveaus</label>
            <div class="slo-entiteit-relaties" data-simply-list="entity.niveau_id" data-simply-entry="relatie">
                <template rel="relatie"></template>
            </div>
            <form data-simply-command="add-relation" data-slo-relation="niveau_id" class="slo-search slo-grid slo-grid-3">
                <input class="slo-grid-span-2" placeholder="Entiteit UUID / tekst" list="niveau">
                <button data-simply-command="add-relation" data-slo-relation="niveau_id" class="slo-button-nomargin slo-button">Toevoegen</button>
            </form>
        </div>
    </template>
    <template id="entiteit-leerlijn">
        <div class="slo-entity">
            <label>Titel
                <textarea data-simply-activate="autosize" data-simply-field="entity.title" placeholder="Entiteit titel"></textarea>
            </label>
            <label>Omschrijving
                <textarea data-simply-activate="autosize" data-simply-field="entity.description" placeholder="Entiteit omschrijving"></textarea>
            </label>
            <label>Vakken</label>
            <div class="slo-entiteit-relaties" data-simply-list="entity.vak_id" data-simply-entry="relatie">
                <template rel="relatie"></template>
            </div>
            <form data-simply-command="add-relation" data-slo-relation="vak_id" class="slo-search slo-grid slo-grid-3">
                <input class="slo-grid-span-2" placeholder="Entiteit UUID / tekst" list="vak">
                <button data-simply-command="add-relation" data-slo-relation="vak_id" class="slo-button-nomargin slo-button">Toevoegen</button>
            </form>
            <label>Niveaus</label>
            <div class="slo-entiteit-relaties" data-simply-list="entity.niveau_id" data-simply-entry="relatie">
                <template rel="relatie"></template>
            </div>
            <form data-simply-command="add-relation" data-slo-relation="niveau_id" class="slo-search slo-grid slo-grid-3">
                <input class="slo-grid-span-2" placeholder="Entiteit UUID / tekst" list="niveau">
                <button data-simply-command="add-relation" data-slo-relation="niveau_id" class="slo-button-nomargin slo-button">Toevoegen</button>
            </form>
            <label>DoelNiveaus</label>
            <div class="slo-entiteit-relaties" data-simply-list="entity.doelniveau_id" data-simply-entry="relatie">
                <template rel="relatie"></template>
            </div>
            <form data-simply-command="add-relation" data-slo-relation="doelniveau" class="slo-search slo-grid slo-grid-3">
                <input class="slo-grid-span-2" placeholder="Entiteit UUID / tekst" list="doelniveau">
                <button data-simply-command="add-relation" data-slo-relation="doelniveau_id" class="slo-button-nomargin slo-button">Toevoegen</button>
            </form>
            <label>Vakinhouden</label>
            <div class="slo-entiteit-relaties" data-simply-list="entity.vakinhoud_id" data-simply-entry="relatie">
                <template rel="relatie"></template>
            </div>
            <form data-simply-command="add-relation" data-slo-relation="vakinhoud" class="slo-search slo-grid slo-grid-3">
                <input class="slo-grid-span-2" placeholder="Entiteit UUID / tekst" list="vakinhoud">
                <button data-simply-command="add-relation" data-slo-relation="vakinhoud_id" class="slo-button-nomargin slo-button">Toevoegen</button>
            </form>
        </div>
    </template>
    <template id="entiteit-vak">
        <div class="slo-entity">
            <label>Titel
                <textarea data-simply-activate="autosize"  data-simply-field="entity.title" placeholder="Entiteit titel"></textarea>
            </label>
            <label>Omschrijving
                <textarea data-simply-activate="autosize"  data-simply-field="entity.description" placeholder="Entiteit omschrijving"></textarea>
            </label>
            <label>Vakkernen</label>
            <div class="slo-entiteit-relaties" data-simply-list="entity.vakkern_id" data-simply-entry="relatie">
                <template rel="relatie"></template>
            </div>
            <form data-simply-command="add-relation" data-slo-relation="vakkern_id" class="slo-search slo-grid slo-grid-3">
                <input class="slo-grid-span-2" placeholder="Entiteit UUID / tekst" list="vakkern">
                <button data-simply-command="add-relation" data-slo-relation="vakkern_id" class="slo-button-nomargin slo-button">Toevoegen</button>
            </form>
            <label>DoelNiveaus</label>
            <div class="slo-entiteit-relaties" data-simply-list="entity.doelniveau_id" data-simply-entry="relatie">
                <template rel="relatie"></template>
            </div>
            <form data-simply-command="add-relation" data-slo-relation="doelniveau" class="slo-search slo-grid slo-grid-3">
                <input class="slo-grid-span-2" placeholder="Entiteit UUID / tekst" list="doelniveau">
                <button data-simply-command="add-relation" data-slo-relation="doelniveau_id" class="slo-button-nomargin slo-button">Toevoegen</button>
            </form>
        </div>
    </template>
    <template id="entiteit-vakkern">
        <div class="slo-entity">
            <label>Titel
                <textarea data-simply-activate="autosize"  data-simply-field="entity.title" placeholder="Entiteit titel"></textarea>
            </label>
            <label>Omschrijving
                <textarea data-simply-activate="autosize" data-simply-field="entity.description" placeholder="Entiteit omschrijving"></textarea>
            </label>
            <label>Vaksubkernen</label>
            <div class="slo-entiteit-relaties" data-simply-list="entity.vaksubkern_id" data-simply-entry="relatie">
                <template rel="relatie"></template>
            </div>
            <form data-simply-command="add-relation" data-slo-relation="vaksubkern" class="slo-search slo-grid slo-grid-3">
                <input class="slo-grid-span-2" placeholder="Entiteit UUID / tekst" list="vaksubkern">
                <button data-simply-command="add-relation" data-slo-relation="vaksubkern_id" class="slo-button-nomargin slo-button">Toevoegen</button>
            </form>
            <label>DoelNiveaus</label>
            <div class="slo-entiteit-relaties" data-simply-list="entity.doelniveau_id" data-simply-entry="relatie">
                <template rel="relatie"></template>
            </div>
            <form data-simply-command="add-relation" data-slo-relation="doelniveau" class="slo-search slo-grid slo-grid-3">
                <input class="slo-grid-span-2" placeholder="Entiteit UUID / tekst" list="doelniveau">
                <button data-simply-command="add-relation" data-slo-relation="doelniveau_id" class="slo-button-nomargin slo-button">Toevoegen</button>
            </form>
        </div>
    </template>
    <template id="entiteit-vaksubkern">
        <div class="slo-entity">
            <label>Titel
                <textarea data-simply-activate="autosize" data-simply-field="entity.title" placeholder="Entiteit titel"></textarea>
            </label>
            <label>Omschrijving
                <textarea data-simply-activate="autosize" data-simply-field="entity.description" placeholder="Entiteit omschrijving"></textarea>
            </label>
            <label>Vakinhouden</label>
            <div class="slo-entiteit-relaties" data-simply-list="entity.vakinhoud_id" data-simply-entry="relatie">
                <template rel="relatie"></template>
            </div>
            <form data-simply-command="add-relation" data-slo-relation="vakinhoud" class="slo-search slo-grid slo-grid-3">
                <input class="slo-grid-span-2" placeholder="Entiteit UUID / tekst" list="vakinhoud">
                <button data-simply-command="add-relation" data-slo-relation="vakinhoud_id" class="slo-button-nomargin slo-button">Toevoegen</button>
            </form>
            <label>DoelNiveaus</label>
            <div class="slo-entiteit-relaties" data-simply-list="entity.doelniveau_id" data-simply-entry="relatie">
                <template rel="relatie"></template>
            </div>
            <form data-simply-command="add-relation" data-slo-relation="doelniveau" class="slo-search slo-grid slo-grid-3">
                <input class="slo-grid-span-2" placeholder="Entiteit UUID / tekst" list="doelniveau">
                <button data-simply-command="add-relation" data-slo-relation="doelniveau_id" class="slo-button-nomargin slo-button">Toevoegen</button>
            </form>
        </div>
    </template>
    <template id="entiteit-vakinhoud">
        <div class="slo-entity">
            <label>Titel
                <textarea data-simply-activate="autosize" data-simply-field="entity.title" placeholder="Entiteit titel"></textarea>
            </label>
            <label>Omschrijving
                <textarea data-simply-activate="autosize" data-simply-field="entity.description" placeholder="Entiteit omschrijving"></textarea>
            </label>
            <label>DoelNiveaus</label>
            <div class="slo-entiteit-relaties" data-simply-list="entity.doelniveau_id" data-simply-entry="relatie">
                <template rel="relatie"></template>
            </div>
            <form data-simply-command="add-relation" data-slo-relation="doelniveau" class="slo-search slo-grid slo-grid-3">
                <input class="slo-grid-span-2" placeholder="Entiteit UUID / tekst" list="doelniveau">
                <button data-simply-command="add-relation" data-slo-relation="doelniveau_id" class="slo-button-nomargin slo-button">Toevoegen</button>
            </form>
        </div>
    </template>
    <template id="entiteit-doelniveau">
        <div class="slo-entity">
            <label>Doelen</label>
            <div class="slo-entiteit-relaties" data-simply-list="entity.doel_id" data-simply-entry="relatie">
                <template rel="relatie"></template>
            </div>
            <form data-simply-command="add-relation" data-slo-relation="doel" class="slo-search slo-grid slo-grid-3">
                <input class="slo-grid-span-2" placeholder="Entiteit UUID / tekst" list="doel">
                <button data-simply-command="add-relation" data-slo-relation="doel_id" class="slo-button-nomargin slo-button">Toevoegen</button>
            </form>
            <label>Niveaus</label>
            <div class="slo-entiteit-relaties" data-simply-list="entity.niveau_id" data-simply-entry="relatie">
                <template rel="relatie"></template>
            </div>
            <form data-simply-command="add-relation" data-slo-relation="niveau" class="slo-search slo-grid slo-grid-3">
                <input class="slo-grid-span-2" placeholder="Entiteit UUID / tekst" list="niveau">
                <button data-simply-command="add-relation" data-slo-relation="niveau_id" class="slo-button-nomargin slo-button">Toevoegen</button>
            </form>
            <label>Kerndoelen</label>
            <div class="slo-entiteit-relaties" data-simply-list="entity.kerndoel_id" data-simply-entry="relatie">
                <template rel="relatie"></template>
            </div>
            <form data-simply-command="add-relation" data-slo-relation="kerndoel" class="slo-search slo-grid slo-grid-3">
                <input class="slo-grid-span-2" placeholder="Entiteit UUID / tekst" list="kerndoel">
                <button data-simply-command="add-relation" data-slo-relation="kerndoel_id" class="slo-button-nomargin slo-button">Toevoegen</button>
            </form>
        </div>
    </template>
    <template id="entiteit-doel">
        <div class="slo-entity">
            <label>Titel
                <textarea data-simply-activate="autosize" data-simply-field="entity.title" placeholder="Entiteit titel"></textarea>
            </label>
        </div>
    </template>
    <template id="entiteit-niveau">
        <div class="slo-entity">
            <label>Prefix
                <input type="text" data-simply-field="entity.prefix" placeholder="Entiteit prefix">
            </label>
            <label>Titel
                <textarea data-simply-activate="autosize" data-simply-field="entity.title" placeholder="Entiteit titel"></textarea>
            </label>
            <label>Omschrijving
                <textarea data-simply-activate="autosize" data-simply-field="entity.description" placeholder="Entiteit omschrijving"></textarea>
            </label>
            <label>Type
                <input type="text" data-simply-field="entity.type" placeholder="Niveau type">
            </label>
        </div>
    </template>
    <template id="entiteit-examenprogramma">
        <div class="slo-entity">
            <label>Titel
                <textarea data-simply-activate="autosize" data-simply-field="entity.title" placeholder="Entiteit titel"></textarea>
            </label>
            <label>Ingangsdatum
                <input type="text" data-simply-field="entity.ingangsdatum" placeholder="Examenprogramma Ingangsdatum">
            </label>
            <label>Ingangsdatum
                <input type="text" data-simply-field="entity.url" placeholder="Examenprogramma URL">
            </label>
            <label>Versie
                <input type="text" data-simply-field="entity.versie" placeholder="Examenprogramma Versie">
            </label>
            <label>Domein</label>
            <div class="slo-entiteit-relaties" data-simply-list="entity.examenprogramma_domein_id" data-simply-entry="relatie">
                <template rel="relatie"></template>
            </div>
            <form data-simply-command="add-relation" data-slo-relation="examenprogramma_domein_id" class="slo-search slo-grid slo-grid-3">
                <input type="slo-grid-span-2" placeholder="Entiteit UUID / tekst" list="examenprogramma_domein">
                <button data-simply-command="add-relation" data-slo-relation="examenprogramma_domein_id" class="slo-button-nomargin slo-button">Toevoegen</button>
            </form>
            <label>Vakleergebied</label>
            <div class="slo-entiteit-relaties" data-simply-list="entity.examenprogramma_vakleergebied_id" data-simply-entry="relatie">
                <template rel="relatie"></template>
            </div>
            <form data-simply-command="add-relation" data-slo-relation="examenprogramma_vakleergebied_id" class="slo-search slo-grid slo-grid-3">
                <input type="slo-grid-span-2" placeholder="Entiteit UUID / tekst" list="examenprogramma_vakleergebied">
                <button data-simply-command="add-relation" data-slo-relation="examenprogramma_vakleergebied_id" class="slo-button-nomargin slo-button">Toevoegen</button>
            </form>
            <label>Kop 1</label>
            <div class="slo-entiteit-relaties" data-simply-list="entity.examenprogramma_kop1_id" data-simply-entry="relatie">
                <template rel="relatie"></template>
            </div>
            <form data-simply-command="add-relation" data-slo-relation="examenprogramma_kop1_id" class="slo-search slo-grid slo-grid-3">
                <input type="slo-grid-span-2" placeholder="Entiteit UUID / tekst" list="examenprogramma_kop1">
                <button data-simply-command="add-relation" data-slo-relation="examenprogramma_kop1_id" class="slo-button-nomargin slo-button">Toevoegen</button>
            </form>
        </div>
    </template>
    <template id="entiteit-examenprogramma_domein">
        <div class="slo-entity">
            <label>Prefix
                <input type="text" data-simply-field="entity.prefix" placeholder="Entiteit prefix">
            </label>
            <label>Titel
                <textarea data-simply-activate="autosize" data-simply-field="entity.title" placeholder="Entiteit titel"></textarea>
            </label>
            <!--- aanwezig volgens context.json maar in praktijk niet
            <label>Ingangsdatum</label>
            <label>url</label>
            <label>versie</label>
            --->
            <label>Subdomein</label>
            <div class="slo-entiteit-relaties" data-simply-list="entity.examenprogramma_subdomein_id" data-simply-entry="relatie">
                <template rel="relatie"></template>
            </div>
            <form data-simply-command="add-relation" data-slo-relation="examenprogramma_subdomein_id" class="slo-search slo-grid slo-grid-3">
                <input type="slo-grid-span-2" placeholder="Entiteit UUID / tekst" list="examenprogramma_subdomein">
                <button data-simply-command="add-relation" data-slo-relation="examenprogramma_subdomein_id" class="slo-button-nomargin slo-button">Toevoegen</button>
            </form>
            <label>Eindterm</label>
            <div class="slo-entiteit-relaties" data-simply-list="entity.examenprogramma_eindterm_id" data-simply-entry="relatie">
                <template rel="relatie"></template>
            </div>
            <form data-simply-command="add-relation" data-slo-relation="examenprogramma_eindterm_id" class="slo-search slo-grid slo-grid-3">
                <input type="slo-grid-span-2" placeholder="Entiteit UUID / tekst" list="examenprogramma_eindterm">
                <button data-simply-command="add-relation" data-slo-relation="examenprogramma_eindterm_id" class="slo-button-nomargin slo-button">Toevoegen</button>
            </form>
        </div>
    </template>
    <template id="entiteit-examenprogramma_subdomein">
        <div class="slo-entity">
            <label>Titel
                <textarea data-simply-activate="autosize" data-simply-field="entity.title" placeholder="Entiteit titel"></textarea>
            </label>
            <!--- aanwezig volgens context.json maar in praktijk niet
            <label>Ingangsdatum</label>
            <label>url</label>
            <label>versie</label>
            --->
            <label>Eindterm</label>
            <div class="slo-entiteit-relaties" data-simply-list="entity.examenprogramma_eindterm_id" data-simply-entry="relatie">
                <template rel="relatie"></template>
            </div>
            <form data-simply-command="add-relation" data-slo-relation="examenprogramma_eindterm_id" class="slo-search slo-grid slo-grid-3">
                <input type="slo-grid-span-2" placeholder="Entiteit UUID / tekst" list="examenprogramma_eindterm">
                <button data-simply-command="add-relation" data-slo-relation="examenprogramma_eindterm_id" class="slo-button-nomargin slo-button">Toevoegen</button>
            </form>
        </div>
    </template>
    <template id="entiteit-examenprogramma_eindterm">
        <div class="slo-entity">
            <label>Prefix
                <input type="text" data-simply-field="entity.prefix" placeholder="Entiteit prefix">
            </label>
            <label>Titel
                <textarea data-simply-activate="autosize" data-simply-field="entity.title" placeholder="Entiteit titel"></textarea>
            </label>
            <label>Omschrijving
                <textarea data-simply-activate="autosize" data-simply-field="entity.description" placeholder="Entiteit omschrijving"></textarea>
            </label>
            <label class="slo-checkbox">
                <input type="checkbox" data-simply-field="entity.ce"> CE
            </label>
            <label class="slo-checkbox">
                <input type="checkbox" data-simply-field="entity.se"> SE
            </label>
            <label class="slo-checkbox">
                <input type="checkbox" data-simply-field="entity.kern"> Kern
            </label>
            <label class="slo-checkbox">
                <input type="checkbox" data-simply-field="entity.keuze"> Keuze
            </label>
            <!--- aanwezig volgens context.json maar in praktijk niet
            <label>Ingangsdatum</label>
            <label>url</label>
            <label>versie</label>
            --->
            <label>Niveau</label>
            <div class="slo-entiteit-relaties" data-simply-list="entity.niveau_id" data-simply-entry="relatie">
                <template rel="relatie"></template>
            </div>
            <form data-simply-command="add-relation" data-slo-relation="niveau_id" class="slo-search slo-grid slo-grid-3">
                <input type="slo-grid-span-2" placeholder="Entiteit UUID / tekst" list="niveau">
                <button data-simply-command="add-relation" data-slo-relation="niveau_id" class="slo-button-nomargin slo-button">Toevoegen</button>
            </form>
        </div>
    </template>
    <template id="entiteit-examenprogramma_vakleergebied">
        <div class="slo-entity">
            <label>Titel
                <textarea data-simply-activate="autosize" data-simply-field="entity.title" placeholder="Entiteit titel"></textarea>
            </label>
            <label>Vak</label>
            <div class="slo-entiteit-relaties" data-simply-list="entity.vak_id" data-simply-entry="relatie">
                <template rel="relatie"></template>
            </div>
            <form class="slo-search slo-grid slo-grid-3" data-slo-relation="vak_id">
                <input class="slo-grid-span-2" placeholder="Entiteit UUID / tekst" list="vak">
                <button data-simply-command="add-relation" data-slo-relation="vak_id" class="slo-button-nomargin slo-button">Toevoegen</button>
            </form>
	</div>
    </template>
    <template id="entiteit-examenprogramma_kop1">
        <div class="slo-entity">
            <label>Prefix
                <input type="text" data-simply-field="entity.prefix" placeholder="Entiteit prefix">
            </label>
            <label>Titel
                <textarea data-simply-activate="autosize" data-simply-field="entity.title" placeholder="Entiteit titel"></textarea>
            </label>
            <label>Kop 2</label>
            <div class="slo-entiteit-relaties" data-simply-list="entity.examenprogramma_kop2_id" data-simply-entry="relatie">
                <template rel="relatie"></template>
            </div>
            <form data-simply-command="add-relation" data-slo-relation="entity.examenprogramma_kop2_id" class="slo-search slo-grid slo-grid-3">
                <input class="slo-grid-span-2" placeholder="Entiteit UUID / tekst" list="examenprogramma_kop2">
                <button data-simply-command="add-relation" data-slo-relation="entity.examenprogramma_kop2_id" class="slo-button-nomargin slo-button">Toevoegen</button>
            </form>
            <label>Body</label>
            <div class="slo-entiteit-relaties" data-simply-list="entity.examenprogramma_body_id" data-simply-entry="relatie">
                <template rel="relatie"></template>
            </div>
            <form class="slo-search slo-grid slo-grid-3" data-slo-relation="examenprogramma_body_id">
                <input class="slo-grid-span-2" placeholder="Entiteit UUID / tekst" list="examenprogramma_body">
                <button data-simply-command="add-relation" data-slo-relation="examenprogramma_body_id" class="slo-button-nomargin slo-button">Toevoegen</button>
            </form>
            <label>Tag</label>
            <div class="slo-entiteit-relaties" data-simply-list="entity.tag_id" data-simply-entry="relatie">
                <template rel="relatie"></template>
            </div>
            <form class="slo-search slo-grid slo-grid-3" data-slo-relation="tag_id">
                <input class="slo-grid-span-2" placeholder="Entiteit UUID / tekst" list="tag">
                <button data-simply-command="add-relation" data-slo-relation="tag_id" class="slo-button-nomargin slo-button">Toevoegen</button>
            </form>
        </div>
    </template>
    <template id="entiteit-examenprogramma_kop2">
        <div class="slo-entity">
            <label>Prefix
                <input type="text" data-simply-field="entity.prefix" placeholder="Entiteit prefix">
            </label>
            <label>Titel
                <textarea data-simply-activate="autosize" data-simply-field="entity.title" placeholder="Entiteit titel"></textarea>
            </label>
            <label>Kop 3</label>
            <div class="slo-entiteit-relaties" data-simply-list="entity.examenprogramma_kop3_id" data-simply-entry="relatie">
                <template rel="relatie"></template>
            </div>
            <form data-simply-command="add-relation" data-slo-relation="entity.examenprogramma_kop3_id" class="slo-search slo-grid slo-grid-3">
                <input class="slo-grid-span-2" placeholder="Entiteit UUID / tekst" list="examenprogramma_kop3">
                <button data-simply-command="add-relation" data-slo-relation="entity.examenprogramma_kop3_id" class="slo-button-nomargin slo-button">Toevoegen</button>
            </form>
            <label>Body</label>
            <div class="slo-entiteit-relaties" data-simply-list="entity.examenprogramma_body_id" data-simply-entry="relatie">
                <template rel="relatie"></template>
            </div>
            <form class="slo-search slo-grid slo-grid-3" data-slo-relation="examenprogramma_body_id">
                <input class="slo-grid-span-2" placeholder="Entiteit UUID / tekst" list="examenprogramma_body">
                <button data-simply-command="add-relation" data-slo-relation="examenprogramma_body_id" class="slo-button-nomargin slo-button">Toevoegen</button>
            </form>
            <label>Tag</label>
            <div class="slo-entiteit-relaties" data-simply-list="entity.tag_id" data-simply-entry="relatie">
                <template rel="relatie"></template>
            </div>
            <form class="slo-search slo-grid slo-grid-3" data-slo-relation="tag_id">
                <input class="slo-grid-span-2" placeholder="Entiteit UUID / tekst" list="tag">
                <button data-simply-command="add-relation" data-slo-relation="tag_id" class="slo-button-nomargin slo-button">Toevoegen</button>
            </form>
        </div>
    </template>

    <template id="entiteit-examenprogramma_kop3">
        <div class="slo-entity">
            <label>Prefix
                <input type="text" data-simply-field="entity.prefix" placeholder="Entiteit prefix">
            </label>
            <label>Titel
                <textarea data-simply-activate="autosize" data-simply-field="entity.title" placeholder="Entiteit titel"></textarea>
            </label>
            <label>Kop 2 (niet volgens context.json)</label>
            <div class="slo-entiteit-relaties" data-simply-list="entity.examenprogramma_kop2_id" data-simply-entry="relatie">
                <template rel="relatie"></template>
            </div>
            <form data-simply-command="add-relation" data-slo-relation="entity.examenprogramma_kop2_id" class="slo-search slo-grid slo-grid-3">
                <input class="slo-grid-span-2" placeholder="Entiteit UUID / tekst" list="examenprogramma_kop2">
                <button data-simply-command="add-relation" data-slo-relation="entity.examenprogramma_kop2_id" class="slo-button-nomargin slo-button">Toevoegen</button>
            </form>
            <label>Kop 3 (niet volgens context.json)</label>
            <div class="slo-entiteit-relaties" data-simply-list="entity.examenprogramma_kop3_id" data-simply-entry="relatie">
                <template rel="relatie"></template>
            </div>
            <form data-simply-command="add-relation" data-slo-relation="entity.examenprogramma_kop3_id" class="slo-search slo-grid slo-grid-3">
                <input class="slo-grid-span-2" placeholder="Entiteit UUID / tekst" list="examenprogramma_kop3">
                <button data-simply-command="add-relation" data-slo-relation="entity.examenprogramma_kop3_id" class="slo-button-nomargin slo-button">Toevoegen</button>
            </form>
            <label>Kop 4</label>
            <div class="slo-entiteit-relaties" data-simply-list="entity.examenprogramma_kop4_id" data-simply-entry="relatie">
                <template rel="relatie"></template>
            </div>
            <form data-simply-command="add-relation" data-slo-relation="entity.examenprogramma_kop4_id" class="slo-search slo-grid slo-grid-3">
                <input class="slo-grid-span-2" placeholder="Entiteit UUID / tekst" list="examenprogramma_kop4">
                <button data-simply-command="add-relation" data-slo-relation="entity.examenprogramma_kop4_id" class="slo-button-nomargin slo-button">Toevoegen</button>
            </form>
            <label>Body</label>
            <div class="slo-entiteit-relaties" data-simply-list="entity.examenprogramma_body_id" data-simply-entry="relatie">
                <template rel="relatie"></template>
            </div>
            <form class="slo-search slo-grid slo-grid-3" data-slo-relation="examenprogramma_body_id">
                <input class="slo-grid-span-2" placeholder="Entiteit UUID / tekst" list="examenprogramma_body">
                <button data-simply-command="add-relation" data-slo-relation="examenprogramma_body_id" class="slo-button-nomargin slo-button">Toevoegen</button>
            </form>
            <label>Tag</label>
            <div class="slo-entiteit-relaties" data-simply-list="entity.tag_id" data-simply-entry="relatie">
                <template rel="relatie"></template>
            </div>
            <form class="slo-search slo-grid slo-grid-3" data-slo-relation="tag_id">
                <input class="slo-grid-span-2" placeholder="Entiteit UUID / tekst" list="tag">
                <button data-simply-command="add-relation" data-slo-relation="tag_id" class="slo-button-nomargin slo-button">Toevoegen</button>
            </form>
        </div>
    </template>
    <template id="entiteit-examenprogramma_kop4">
        <div class="slo-entity">
            <label>Prefix
                <input type="text" data-simply-field="entity.prefix" placeholder="Entiteit prefix">
            </label>
            <label>Titel
                <textarea data-simply-activate="autosize" data-simply-field="entity.title" placeholder="Entiteit titel"></textarea>
            </label>
            <label>Body</label>
            <div class="slo-entiteit-relaties" data-simply-list="entity.examenprogramma_body_id" data-simply-entry="relatie">
                <template rel="relatie"></template>
            </div>
            <form class="slo-search slo-grid slo-grid-3" data-slo-relation="examenprogramma_body_id">
                <input class="slo-grid-span-2" placeholder="Entiteit UUID / tekst" list="examenprogramma_body">
                <button data-simply-command="add-relation" data-slo-relation="examenprogramma_body_id" class="slo-button-nomargin slo-button">Toevoegen</button>
            </form>
            <label>Tag</label>
            <div class="slo-entiteit-relaties" data-simply-list="entity.tag_id" data-simply-entry="relatie">
                <template rel="relatie"></template>
            </div>
            <form class="slo-search slo-grid slo-grid-3" data-slo-relation="tag_id">
                <input class="slo-grid-span-2" placeholder="Entiteit UUID / tekst" list="tag">
                <button data-simply-command="add-relation" data-slo-relation="tag_id" class="slo-button-nomargin slo-button">Toevoegen</button>
            </form>
        </div>
    </template>
    <template id="entiteit-examenprogramma_body">
        <div class="slo-entity">
            <label>Prefix
                <input type="text" data-simply-field="entity.prefix" placeholder="Entiteit prefix">
            </label>
            <label>Titel
                <textarea data-simply-activate="autosize" data-simply-field="entity.title" placeholder="Entiteit titel"></textarea>
            </label>
            <label>Tag</label>
            <div class="slo-entiteit-relaties" data-simply-list="entity.tag_id" data-simply-entry="relatie">
                <template rel="relatie"></template>
            </div>
            <form class="slo-search slo-grid slo-grid-3" data-slo-relation="tag_id">
                <input class="slo-grid-span-2" placeholder="Entiteit UUID / tekst" list="tag">
                <button data-simply-command="add-relation" data-slo-relation="tag_id" class="slo-button-nomargin slo-button">Toevoegen</button>
            </form>
        </div>
    </template>
    <!-- kerndoelen -->
    <template id="entiteit-kerndoel">
        <div class="slo-entity">
            <label>Prefix
                <input type="text" data-simply-field="entity.prefix" placeholder="Entiteit prefix">
            </label>
            <label>Titel
                <textarea data-simply-activate="autosize" data-simply-field="entity.title" placeholder="Entiteit titel"></textarea>
            </label>
            <label>Omschrijving
                <textarea data-simply-activate="autosize" data-simply-field="entity.description" placeholder="Entiteit omschrijving"></textarea>
            </label>
            <label>Niveau</label>
            <div class="slo-entiteit-relaties" data-simply-list="entity.niveau_id" data-simply-entry="relatie">
                <template rel="relatie"></template>
            </div>
            <form class="slo-search slo-grid slo-grid-3" data-slo-relation="niveau_id">
                <input class="slo-grid-span-2" placeholder="Entiteit UUID / tekst" list="niveau">
                <button data-simply-command="add-relation" data-slo-relation="niveau_id" class="slo-button-nomargin slo-button">Toevoegen</button>
            </form>
        </div>
    </template>
    <template id="entiteit-kerndoel_domein">
        <div class="slo-entity">
            <label>Titel
                <textarea data-simply-activate="autosize" data-simply-field="entity.title" placeholder="Entiteit titel"></textarea>
            </label>
            <label>Kerndoel</label>
            <div class="slo-entiteit-relaties" data-simply-list="entity.kerndoel_id" data-simply-entry="relatie">
                <template rel="relatie"></template>
            </div>
            <form class="slo-search slo-grid slo-grid-3" data-slo-relation="kerndoel_id">
                <input class="slo-grid-span-2" placeholder="Entiteit UUID / tekst" list="kerndoel">
                <button data-simply-command="add-relation" data-slo-relation="kerndoel_id" class="slo-button-nomargin slo-button">Toevoegen</button>
            </form>
        </div>
    </template>
    <template id="entiteit-kerndoel_uitstroomprofiel">
        <div class="slo-entity">
            <label>Titel
                <textarea data-simply-activate="autosize" data-simply-field="entity.title" placeholder="Entiteit titel"></textarea>
            </label>
            <label>Omschrijving
                <textarea data-simply-activate="autosize" data-simply-field="entity.description" placeholder="Entiteit omschrijving"></textarea>
            </label>
            <label>Tag</label>
            <div class="slo-entiteit-relaties" data-simply-list="entity.tag_id" data-simply-entry="relatie">
                <template rel="relatie"></template>
            </div>
            <form class="slo-search slo-grid slo-grid-3" data-slo-relation="tag_id">
                <input class="slo-grid-span-2" placeholder="Entiteit UUID / tekst" list="tag">
                <button data-simply-command="add-relation" data-slo-relation="tag_id" class="slo-button-nomargin slo-button">Toevoegen</button>
            </form>
        </div>
    </template>
    <template id="entiteit-kerndoel_vakleergebied">
        <div class="slo-entity">
            <label>Titel
                <textarea data-simply-activate="autosize" data-simply-field="entity.title" placeholder="Entiteit titel"></textarea>
            </label>
            <label>Domein</label>
            <div class="slo-entiteit-relaties" data-simply-list="entity.kerndoel_domein_id" data-simply-entry="relatie">
                <template rel="relatie"></template>
            </div>
            <form class="slo-search slo-grid slo-grid-3" data-slo-relation="kerndoel_domein_id">
                <input class="slo-grid-span-2" placeholder="Entiteit UUID / tekst" list="kerndoel_domein">
                <button data-simply-command="add-relation" data-slo-relation="kerndoel_domein_id" class="slo-button-nomargin slo-button">Toevoegen</button>
            </form>
            <label>Uitstroomprofiel</label>
            <div class="slo-entiteit-relaties" data-simply-list="entity.kerndoel_uitstroomprofiel_id" data-simply-entry="relatie">
                <template rel="relatie"></template>
            </div>
            <form class="slo-search slo-grid slo-grid-3" data-slo-relation="kerndoel_uitstroomprofiel_id">
                <input class="slo-grid-span-2" placeholder="Entiteit UUID / tekst" list="kerndoel_uitstroomprofiel">
                <button data-simply-command="add-relation" data-slo-relation="kerndoel_uitstroomprofiel_id" class="slo-button-nomargin slo-button">Toevoegen</button>
            </form>
            <label>Kerndoel</label>
            <div class="slo-entiteit-relaties" data-simply-list="entity.kerndoel_id" data-simply-entry="relatie">
                <template rel="relatie"></template>
            </div>
            <form class="slo-search slo-grid slo-grid-3" data-slo-relation="kerndoel_id">
                <input class="slo-grid-span-2" placeholder="Entiteit UUID / tekst" list="kerndoel">
                <button data-simply-command="add-relation" data-slo-relation="kerndoel_id" class="slo-button-nomargin slo-button">Toevoegen</button>
            </form>
            <label>Vak</label>
            <div class="slo-entiteit-relaties" data-simply-list="entity.vak_id" data-simply-entry="relatie">
                <template rel="relatie"></template>
            </div>
            <form class="slo-search slo-grid slo-grid-3" data-slo-relation="vak_id">
                <input class="slo-grid-span-2" placeholder="Entiteit UUID / tekst" list="vak">
                <button data-simply-command="add-relation" data-slo-relation="vak_id" class="slo-button-nomargin slo-button">Toevoegen</button>
            </form>
        </div>
    </template>
    <!-- syllabus -->
    <template id="entiteit-syllabus">
        <div class="slo-entity">
            <label>Prefix
                <input type="text" data-simply-field="entity.prefix" placeholder="Entiteit prefix">
            </label>
            <label>Titel
                <textarea data-simply-activate="autosize" data-simply-field="entity.title" placeholder="Entiteit titel"></textarea>
            </label>
            <label>Omschrijving
                <textarea data-simply-activate="autosize" data-simply-field="entity.description" placeholder="Entiteit omschrijving"></textarea>
            </label>
            <label>Examenprogramma</label>
            <div class="slo-entiteit-relaties" data-simply-list="entity.examenprogramma_id" data-simply-entry="relatie">
                <template rel="relatie"></template>
            </div>
            <form class="slo-search slo-grid slo-grid-3" data-slo-relation="examenprogramma_id">
                <input class="slo-grid-span-2" placeholder="Entiteit UUID / tekst" list="examenprogramma">
                <button data-simply-command="add-relation" data-slo-relation="examenprogramma_id" class="slo-button-nomargin slo-button">Toevoegen</button>
            </form>
            <label>Specifieke eindtermen</label>
            <div class="slo-entiteit-relaties" data-simply-list="entity.syllabus_specifieke_eindterm_id" data-simply-entry="relatie">
                <template rel="relatie"></template>
            </div>
            <form class="slo-search slo-grid slo-grid-3" data-slo-relation="syllabus_specifieke_eindterm_id">
                <input class="slo-grid-span-2" placeholder="Entiteit UUID / tekst" list="syllabus_specifieke_eindterm">
                <button data-simply-command="add-relation" data-slo-relation="syllabus_specifieke_eindterm_id" class="slo-button-nomargin slo-button">Toevoegen</button>
            </form>
            <label>Toelichting</label>
            <div class="slo-entiteit-relaties" data-simply-list="entity.syllabus_toelichting_id" data-simply-entry="relatie">
                <template rel="relatie"></template>
            </div>
            <form class="slo-search slo-grid slo-grid-3" data-slo-relation="syllabus_toelichting_id">
                <input class="slo-grid-span-2" placeholder="Entiteit UUID / tekst" list="syllabus_toelichting">
                <button data-simply-command="add-relation" data-slo-relation="syllabus_toelichting_id" class="slo-button-nomargin slo-button">Toevoegen</button>
            </form>
            <label>Vakbegrippen</label>
            <div class="slo-entiteit-relaties" data-simply-list="entity.syllabus_vakbegrip_id" data-simply-entry="relatie">
                <template rel="relatie"></template>
            </div>
            <form class="slo-search slo-grid slo-grid-3" data-slo-relation="syllabus_vakbegrip_id">
                <input class="slo-grid-span-2" placeholder="Entiteit UUID / tekst" list="syllabus_vakbegrip">
                <button data-simply-command="add-relation" data-slo-relation="syllabus_vakbegrip_id" class="slo-button-nomargin slo-button">Toevoegen</button>
            </form>
        </div>
    </template>
    <template id="entiteit-syllabus_vakbegrip">
        <div class="slo-entity">
            <label>Titel
                <textarea data-simply-activate="autosize" data-simply-field="entity.title" placeholder="Entiteit titel"></textarea>
            </label>
            <label>Omschrijving
                <textarea data-simply-activate="autosize" data-simply-field="entity.description" placeholder="Entiteit omschrijving"></textarea>
            </label>
            <label>Examenprogramma</label>
            <div class="slo-entiteit-relaties" data-simply-list="entity.examenprogramma_id" data-simply-entry="relatie">
                <template rel="relatie"></template>
            </div>
            <form class="slo-search slo-grid slo-grid-3" data-slo-relation="examenprogramma_id">
                <input class="slo-grid-span-2" placeholder="Entiteit UUID / tekst" list="examenprogramma">
                <button data-simply-command="add-relation" data-slo-relation="examenprogramma_id" class="slo-button-nomargin slo-button">Toevoegen</button>
            </form>
            <label>Examenprogramma domein</label>
            <div class="slo-entiteit-relaties" data-simply-list="entity.examenprogramma_domein_id" data-simply-entry="relatie">
                <template rel="relatie"></template>
            </div>
            <form class="slo-search slo-grid slo-grid-3" data-slo-relation="examenprogramma_domein_id">
                <input class="slo-grid-span-2" placeholder="Entiteit UUID / tekst" list="examenprogramma_domein">
                <button data-simply-command="add-relation" data-slo-relation="examenprogramma_domein_id" class="slo-button-nomargin slo-button">Toevoegen</button>
            </form>
            <label>Examenprogramma subdomein</label>
            <div class="slo-entiteit-relaties" data-simply-list="entity.examenprogramma_subdomein_id" data-simply-entry="relatie">
                <template rel="relatie"></template>
            </div>
            <form class="slo-search slo-grid slo-grid-3" data-slo-relation="examenprogramma_subdomein_id">
                <input class="slo-grid-span-2" placeholder="Entiteit UUID / tekst" list="examenprogramma_subdomein">
                <button data-simply-command="add-relation" data-slo-relation="examenprogramma_subdomein_id" class="slo-button-nomargin slo-button">Toevoegen</button>
            </form>
            <label>Examenprogramma eindterm</label>
            <div class="slo-entiteit-relaties" data-simply-list="entity.examenprogramma_eindterm_id" data-simply-entry="relatie">
                <template rel="relatie"></template>
            </div>
            <form class="slo-search slo-grid slo-grid-3" data-slo-relation="examenprogramma_eindterm_id">
                <input class="slo-grid-span-2" placeholder="Entiteit UUID / tekst" list="examenprogramma_eindterm">
                <button data-simply-command="add-relation" data-slo-relation="examenprogramma_eindterm_id" class="slo-button-nomargin slo-button">Toevoegen</button>
            </form>
        </div>
    </template>
    <template id="entiteit-syllabus_specifieke_eindterm">
        <div class="slo-entity">
            <label>Titel
                <textarea data-simply-activate="autosize" data-simply-field="entity.title" placeholder="Entiteit titel"></textarea>
            </label>
            <label>Omschrijving
                <textarea data-simply-activate="autosize" data-simply-field="entity.description" placeholder="Entiteit omschrijving"></textarea>
            </label>
            <label>Examenprogramma</label>
            <div class="slo-entiteit-relaties" data-simply-list="entity.examenprogramma_id" data-simply-entry="relatie">
                <template rel="relatie"></template>
            </div>
            <form class="slo-search slo-grid slo-grid-3" data-slo-relation="examenprogramma_id">
                <input class="slo-grid-span-2" placeholder="Entiteit UUID / tekst" list="examenprogramma">
                <button data-simply-command="add-relation" data-slo-relation="examenprogramma_id" class="slo-button-nomargin slo-button">Toevoegen</button>
            </form>
            <label>Examenprogramma domein</label>
            <div class="slo-entiteit-relaties" data-simply-list="entity.examenprogramma_domein_id" data-simply-entry="relatie">
                <template rel="relatie"></template>
            </div>
            <form class="slo-search slo-grid slo-grid-3" data-slo-relation="examenprogramma_domein_id">
                <input class="slo-grid-span-2" placeholder="Entiteit UUID / tekst" list="examenprogramma_domein">
                <button data-simply-command="add-relation" data-slo-relation="examenprogramma_domein_id" class="slo-button-nomargin slo-button">Toevoegen</button>
            </form>
            <label>Examenprogramma subdomein</label>
            <div class="slo-entiteit-relaties" data-simply-list="entity.examenprogramma_subdomein_id" data-simply-entry="relatie">
                <template rel="relatie"></template>
            </div>
            <form class="slo-search slo-grid slo-grid-3" data-slo-relation="examenprogramma_subdomein_id">
                <input class="slo-grid-span-2" placeholder="Entiteit UUID / tekst" list="examenprogramma_subdomein">
                <button data-simply-command="add-relation" data-slo-relation="examenprogramma_subdomein_id" class="slo-button-nomargin slo-button">Toevoegen</button>
            </form>
            <label>Examenprogramma eindterm</label>
            <div class="slo-entiteit-relaties" data-simply-list="entity.examenprogramma_eindterm_id" data-simply-entry="relatie">
                <template rel="relatie"></template>
            </div>
            <form class="slo-search slo-grid slo-grid-3" data-slo-relation="examenprogramma_eindterm_id">
                <input class="slo-grid-span-2" placeholder="Entiteit UUID / tekst" list="examenprogramma_eindterm">
                <button data-simply-command="add-relation" data-slo-relation="examenprogramma_eindterm_id" class="slo-button-nomargin slo-button">Toevoegen</button>
            </form>
        </div>
    </template>
    <template id="entiteit-syllabus_toelichting">
        <div class="slo-entity">
            <label>Titel
                <textarea data-simply-activate="autosize" data-simply-field="entity.title" placeholder="Entiteit titel"></textarea>
            </label>
            <label>Omschrijving
                <textarea data-simply-activate="autosize" data-simply-field="entity.description" placeholder="Entiteit omschrijving"></textarea>
            </label>
            <label>Examenprogramma</label>
            <div class="slo-entiteit-relaties" data-simply-list="entity.examenprogramma_id" data-simply-entry="relatie">
                <template rel="relatie"></template>
            </div>
            <form class="slo-search slo-grid slo-grid-3" data-slo-relation="examenprogramma_id">
                <input class="slo-grid-span-2" placeholder="Entiteit UUID / tekst" list="examenprogramma">
                <button data-simply-command="add-relation" data-slo-relation="examenprogramma_id" class="slo-button-nomargin slo-button">Toevoegen</button>
            </form>
            <label>Examenprogramma domein</label>
            <div class="slo-entiteit-relaties" data-simply-list="entity.examenprogramma_domein_id" data-simply-entry="relatie">
                <template rel="relatie"></template>
            </div>
            <form class="slo-search slo-grid slo-grid-3" data-slo-relation="examenprogramma_domein_id">
                <input class="slo-grid-span-2" placeholder="Entiteit UUID / tekst" list="examenprogramma_domein">
                <button data-simply-command="add-relation" data-slo-relation="examenprogramma_domein_id" class="slo-button-nomargin slo-button">Toevoegen</button>
            </form>
            <label>Examenprogramma subdomein</label>
            <div class="slo-entiteit-relaties" data-simply-list="entity.examenprogramma_subdomein_id" data-simply-entry="relatie">
                <template rel="relatie"></template>
            </div>
            <form class="slo-search slo-grid slo-grid-3" data-slo-relation="examenprogramma_subdomein_id">
                <input class="slo-grid-span-2" placeholder="Entiteit UUID / tekst" list="examenprogramma_subdomein">
                <button data-simply-command="add-relation" data-slo-relation="examenprogramma_subdomein_id" class="slo-button-nomargin slo-button">Toevoegen</button>
            </form>
            <label>Examenprogramma eindterm</label>
            <div class="slo-entiteit-relaties" data-simply-list="entity.examenprogramma_eindterm_id" data-simply-entry="relatie">
                <template rel="relatie"></template>
            </div>
            <form class="slo-search slo-grid slo-grid-3" data-slo-relation="examenprogramma_eindterm_id">
                <input class="slo-grid-span-2" placeholder="Entiteit UUID / tekst" list="examenprogramma_eindterm">
                <button data-simply-command="add-relation" data-slo-relation="examenprogramma_eindterm_id" class="slo-button-nomargin slo-button">Toevoegen</button>
            </form>
        </div>
    </template>

    <template id="entiteit-leerlingtekst">
        <div class="slo-entity">
            <label>Titel
                <textarea data-simply-activate="autosize" data-simply-field="entity.title" placeholder="Entiteit titel"></textarea>
            </label>
            <label>Omschrijving
                <textarea data-simply-activate="autosize" data-simply-field="entity.description" placeholder="Entiteit omschrijving"></textarea>
            </label>
            <label>Vakken</label>
            <div class="slo-entiteit-relaties" data-simply-list="entity.vak_id" data-simply-entry="relatie">
                <template rel="relatie"></template>
            </div>
            <form data-simply-command="add-relation" data-slo-relation="vak_id" class="slo-search slo-grid slo-grid-3">
                <input class="slo-grid-span-2" placeholder="Entiteit UUID / tekst" list="vak">
                <button data-simply-command="add-relation" data-slo-relation="vak_id" class="slo-button-nomargin slo-button">Toevoegen</button>
            </form>
            <label>Vakkernen</label>
            <div class="slo-entiteit-relaties" data-simply-list="entity.vakkern_id" data-simply-entry="relatie">
                <template rel="relatie"></template>
            </div>
            <form data-simply-command="add-relation" data-slo-relation="vakkern_id" class="slo-search slo-grid slo-grid-3">
                <input class="slo-grid-span-2" placeholder="Entiteit UUID / tekst" list="vakkern">
                <button data-simply-command="add-relation" data-slo-relation="vakkern_id" class="slo-button-nomargin slo-button">Toevoegen</button>
            </form>
            <label>Vaksubkernen</label>
            <div class="slo-entiteit-relaties" data-simply-list="entity.vaksubkern_id" data-simply-entry="relatie">
                <template rel="relatie"></template>
            </div>
            <form data-simply-command="add-relation" data-slo-relation="vaksubkern_id" class="slo-search slo-grid slo-grid-3">
                <input class="slo-grid-span-2" placeholder="Entiteit UUID / tekst" list="vaksubkern">
                <button data-simply-command="add-relation" data-slo-relation="vaksubkern_id" class="slo-button-nomargin slo-button">Toevoegen</button>
            </form>
            <label>Vakinhouden</label>
            <div class="slo-entiteit-relaties" data-simply-list="entity.vakinhoud_id" data-simply-entry="relatie">
                <template rel="relatie"></template>
            </div>
            <form data-simply-command="add-relation" data-slo-relation="vakinhoud_id" class="slo-search slo-grid slo-grid-3">
                <input class="slo-grid-span-2" placeholder="Entiteit UUID / tekst" list="vakinhoud">
                <button data-simply-command="add-relation" data-slo-relation="vakinhoud_id" class="slo-button-nomargin slo-button">Toevoegen</button>
            </form>
            <label>DoelNiveaus</label>
            <div class="slo-entiteit-relaties" data-simply-list="entity.doelniveau_id" data-simply-entry="relatie">
                <template rel="relatie"></template>
            </div>
            <form data-simply-command="add-relation" data-slo-relation="doelniveau" class="slo-search slo-grid slo-grid-3">
                <input class="slo-grid-span-2" placeholder="Entiteit UUID / tekst" list="doelniveau">
                <button data-simply-command="add-relation" data-slo-relation="doelniveau_id" class="slo-button-nomargin slo-button">Toevoegen</button>
            </form>
            <label>Doelen</label>
            <div class="slo-entiteit-relaties" data-simply-list="entity.doel_id" data-simply-entry="relatie">
                <template rel="relatie"></template>
            </div>
            <form data-simply-command="add-relation" data-slo-relation="doel" class="slo-search slo-grid slo-grid-3">
                <input class="slo-grid-span-2" placeholder="Entiteit UUID / tekst" list="doel">
                <button data-simply-command="add-relation" data-slo-relation="doel_id" class="slo-button-nomargin slo-button">Toevoegen</button>
            </form>
            <label>Niveaus</label>
            <div class="slo-entiteit-relaties" data-simply-list="entity.niveau_id" data-simply-entry="relatie">
                <template rel="relatie"></template>
            </div>
            <form data-simply-command="add-relation" data-slo-relation="niveau" class="slo-search slo-grid slo-grid-3">
                <input class="slo-grid-span-2" placeholder="Entiteit UUID / tekst" list="niveau">
                <button data-simply-command="add-relation" data-slo-relation="niveau_id" class="slo-button-nomargin slo-button">Toevoegen</button>
            </form>
            <label>Examenprogramma</label>
            <div class="slo-entiteit-relaties" data-simply-list="entity.examenprogramma_id" data-simply-entry="relatie">
                <template rel="relatie"></template>
            </div>
            <form class="slo-search slo-grid slo-grid-3" data-slo-relation="examenprogramma_id">
                <input class="slo-grid-span-2" placeholder="Entiteit UUID / tekst" list="examenprogramma">
                <button data-simply-command="add-relation" data-slo-relation="examenprogramma_id" class="slo-button-nomargin slo-button">Toevoegen</button>
            </form>
            <label>Examenprogramma domein</label>
            <div class="slo-entiteit-relaties" data-simply-list="entity.examenprogramma_domein_id" data-simply-entry="relatie">
                <template rel="relatie"></template>
            </div>
            <form class="slo-search slo-grid slo-grid-3" data-slo-relation="examenprogramma_domein_id">
                <input class="slo-grid-span-2" placeholder="Entiteit UUID / tekst" list="examenprogramma_domein">
                <button data-simply-command="add-relation" data-slo-relation="examenprogramma_domein_id" class="slo-button-nomargin slo-button">Toevoegen</button>
            </form>
            <label>Examenprogramma subdomein</label>
            <div class="slo-entiteit-relaties" data-simply-list="entity.examenprogramma_subdomein_id" data-simply-entry="relatie">
                <template rel="relatie"></template>
            </div>
            <form class="slo-search slo-grid slo-grid-3" data-slo-relation="examenprogramma_subdomein_id">
                <input class="slo-grid-span-2" placeholder="Entiteit UUID / tekst" list="examenprogramma_subdomein">
                <button data-simply-command="add-relation" data-slo-relation="examenprogramma_subdomein_id" class="slo-button-nomargin slo-button">Toevoegen</button>
            </form>
            <label>Examenprogramma eindterm</label>
            <div class="slo-entiteit-relaties" data-simply-list="entity.examenprogramma_eindterm_id" data-simply-entry="relatie">
                <template rel="relatie"></template>
            </div>
        </div>
    </template>
    <datalist id="entities" data-simply-list="dataset.entities" data-simply-data="entities" data-simply-entry="entry"><template><option data-simply-transformer="searchoption" data-simply-field="entry"></option></template></datalist>
    <datalist id="vak" data-simply-list="dataset.vak" data-simply-data="vak" data-simply-entry="entry"><template><option data-simply-transformer="searchoption" data-simply-field="entry"></option></template></datalist>
    <datalist id="vakkern" data-simply-list="dataset.vakkern" data-simply-data="vakkern" data-simply-entry="entry"><template><option data-simply-transformer="searchoption" data-simply-field="entry"></option></template></datalist>
    <datalist id="vaksubkern" data-simply-list="dataset.vaksubkern" data-simply-data="vaksubkern" data-simply-entry="entry"><template><option data-simply-transformer="searchoption" data-simply-field="entry"></option></template></datalist>
    <datalist id="vakinhoud" data-simply-list="dataset.vakinhoud" data-simply-data="vakinhoud" data-simply-entry="entry"><template><option data-simply-transformer="searchoption" data-simply-field="entry"></option></template></datalist>
    <datalist id="doelniveau" data-simply-list="dataset.doelniveau" data-simply-data="doelniveau" data-simply-entry="entry"><template><option data-simply-transformer="searchoption" data-simply-field="entry"></option></template></datalist>
    <datalist id="doel" data-simply-list="dataset.doel" data-simply-data="doel" data-simply-entry="entry"><template><option data-simply-transformer="searchoption" data-simply-field="entry"></option></template></datalist>
    <datalist id="niveau" data-simply-list="dataset.niveau" data-simply-data="niveau" data-simply-entry="entry"><template><option data-simply-transformer="searchoption" data-simply-field="entry"></option></template></datalist>

    <datalist id="examenprogramma" data-simply-list="dataset.examenprogramma" data-simply-data="examenprogramma" data-simply-entry="entry"><template><option data-simply-transformer="searchoption" data-simply-field="entry"></option></template></datalist>
    <datalist id="examenprogramma_domein" data-simply-list="dataset.examenprogramma_domein" data-simply-data="examenprogramma_domein" data-simply-entry="entry"><template><option data-simply-transformer="searchoption" data-simply-field="entry"></option></template></datalist>
    <datalist id="examenprogramma_subdomein" data-simply-list="dataset.examenprogramma_subdomein" data-simply-data="examenprogramma_subdomein" data-simply-entry="entry"><template><option data-simply-transformer="searchoption" data-simply-field="entry"></option></template></datalist>
    <datalist id="examenprogramma_eindterm" data-simply-list="dataset.examenprogramma_eindterm" data-simply-data="examenprogramma_eindterm" data-simply-entry="entry"><template><option data-simply-transformer="searchoption" data-simply-field="entry"></option></template></datalist>

    <datalist id="syllabus_vakbegrip" data-simply-list="dataset.syllabus_vakbegrip" data-simply-data="syllabus_vakbegrip" data-simply-entry="entry"><template><option data-simply-transformer="searchoption" data-simply-field="entry"></option></template></datalist>
    <datalist id="syllabus_toelichting" data-simply-list="dataset.syllabus_toelichting" data-simply-data="syllabus_toelichting" data-simply-entry="entry"><template><option data-simply-transformer="searchoption" data-simply-field="entry"></option></template></datalist>
    <datalist id="syllabus_specifieke_eindterm" data-simply-list="dataset.syllabus_specifieke_eindterm" data-simply-data="syllabus_specifieke_eindterm" data-simply-entry="entry"><template><option data-simply-transformer="searchoption" data-simply-field="entry"></option></template></datalist>

    <main class="slo-main slo-space-vertical">
        <div class="slo-grid slo-grid-4">
            <form data-simply-command="search" class="slo-grid slo-grid-span-3 slo-grid-3 slo-space">
                <input class="slo-grid-span-2" type="text" name="search" placeholder="Entiteit UUID / tekst" list="entities">
                <button data-simply-command="search" class="slo-button slo-button-nomargin" data-simply-command="search">Toon entiteit</button>
            </form>
            <div class="slo-grid slo-grid-2 slo-space">
                <span></span><button class="slo-button slo-right" data-simply-command="save">Bewaar</button>
            </div>
        </div>
        <div class="slo-grid slo-grid-4">
            <div class="slo-grid-span-3" data-simply-field="page" data-simply-content="template" data-simply-default-value="new">
            <template data-simply-template="edit">
                <article class="slo-card slo-grid-span-3">
                    <header class="slo-card-header slo-space">
                        <span class="slo-tag">
                            <label class="slo-tag-label">
                                <svg class="slo-icon slo-icon-feather">
                                    <use xlink:href="/files/feather-sprite.svg#link">
                                </use></svg>
                            </label>
                            <span class="slo-id" data-simply-field="entity.id"></span>
                        </span>
                        <span class="slo-tag">
                            <label class="slo-tag-label">Type</label>
                            <span data-simply-field="entity.section"></span>
                        </span>
                        <span data-simply-field="entity.dirty" data-simply-content="template">
                            <template data-simply-template="1">
                                <span class="slo-tag">Inhoudelijk gewijzigd</span>
                            </template>                                    
                        </span>
                        <button class="slo-button slo-right slo-button-nomargin">
                            <svg class="slo-icon slo-icon-feather">
                                <use xlink:href="/files/feather-sprite.svg#trash">
                                </use>
                            </svg>
                        </button>
                        <ul class="slo-nav-crumbs slo-space" data-simply-list="entity.parents">
                            <template>
                                <li>
                                    <a href="#" data-simply-field="id" data-simply-transformer="editlink" data-simply-content="fixed"><span data-simply-field="id" data-simply-transformer="idToTitle"></span></a>
                                </li>
                            </template>
                        </ul>
                    </header>
                    <div class="slo-card-body" data-simply-field="entity.section" data-simply-content="template" data-simply-default-value="default">
                        <template data-simply-template="vakkencluster" rel="entiteit-vakkencluster"></template>
                        <template data-simply-template="leerlijn" rel="entiteit-leerlijn"></template>
                        <template data-simply-template="vak" rel="entiteit-vak"></template>
                        <template data-simply-template="vakkern" rel="entiteit-vakkern"></template>
                        <template data-simply-template="vaksubkern" rel="entiteit-vaksubkern"></template>
                        <template data-simply-template="vakinhoud" rel="entiteit-vakinhoud"></template>
                        <template data-simply-template="doelniveau" rel="entiteit-doelniveau"></template>
                        <template data-simply-template="doel" rel="entiteit-doel"></template>
                        <template data-simply-template="niveau" rel="entiteit-niveau"></template>
                        <template data-simply-template="examenprogramma" rel="entiteit-examenprogramma"></template>
                        <template data-simply-template="examenprogramma_domein" rel="entiteit-examenprogramma_domein"></template>
                        <template data-simply-template="examenprogramma_subdomein" rel="entiteit-examenprogramma_subdomein"></template>
                        <template data-simply-template="examenprogramma_eindterm" rel="entiteit-examenprogramma_eindterm"></template>
                        <template data-simply-template="examenprogramma_kop1" rel="entiteit-examenprogramma_kop1"></template>
                        <template data-simply-template="examenprogramma_kop2" rel="entiteit-examenprogramma_kop2"></template>
                        <template data-simply-template="examenprogramma_kop3" rel="entiteit-examenprogramma_kop3"></template>
                        <template data-simply-template="examenprogramma_kop4" rel="entiteit-examenprogramma_kop4"></template>
                        <template data-simply-template="examenprogramma_body" rel="entiteit-examenprogramma_body"></template>
                        <template data-simply-template="examenprogramma_vakleergebied" rel="entiteit-examenprogramma_vakleergebied"></template>
                        <template data-simply-template="kerndoel" rel="entiteit-kerndoel"></template>
                        <template data-simply-template="kerndoel_domein" rel="entiteit-kerndoel_domein"></template>
                        <template data-simply-template="kerndoel_uitstroomprofiel" rel="entiteit-kerndoel_uitstroomprofiel"></template>
                        <template data-simply-template="kerndoel_vakleergebied" rel="entiteit-kerndoel_vakleergebied"></template>
                        <template data-simply-template="syllabus" rel="entiteit-syllabus"></template>
                        <template data-simply-template="syllabus_vakbegrip" rel="entiteit-syllabus_vakbegrip"></template>
                        <template data-simply-template="syllabus_toelichting" rel="entiteit-syllabus_toelichting"></template>
                        <template data-simply-template="syllabus_specifieke_eindterm" rel="entiteit-syllabus_specifieke_eindterm"></template>
                        <template data-simply-template="leerlingtekst" rel="entiteit-leerlingtekst"></template>
                    </div>
                </article>
            </template>
            <template data-simply-template="new">
                <article class="slo-card slo-grid-span-3">
                    <header class="slo-card-header slo-space">
                        <span class="slo-tag">
                            <label class="slo-tag-label">
                                <svg class="slo-icon slo-icon-feather">
                                    <use xlink:href="/files/feather-sprite.svg#link">
                                </use></svg>
                            </label>
                            <span class="slo-id" data-simply-field="entity.id"></span>
                        </span>
                        <span class="slo-tag">
                            <label class="slo-tag-label">Type</label>
                            <select class="slo-entity-select" data-simply-field="entity.section">
                                <option value="leerlijn">leerlijn</option>
                                <option value="vakkencluster">vakkencluster</option>
                                <option value="vak">vak</option>
                                <option value="vakkern">vakkern</option>
                                <option value="vaksubkern">vaksubkern</option>
                                <option value="vakinhoud">vakinhoud</option>
                                <option value="doelniveau">doelniveau</option>
                                <option value="doel">doel</option>
                                <option value="niveau">niveau</option>
                                <option value="examenprogramma">examenprogramma</option>
                                <option value="examenprogramma_domein">examenprogramma_domein</option>
                                <option value="examenprogramma_subdomein">examenprogramma_subdomein</option>
                                <option value="examenprogramma_eindterm">examenprogramma_eindterm</option>
                                <option value="examenprogramma_kop1">examenprogramma_kop1</option>
                                <option value="examenprogramma_kop2">examenprogramma_kop2</option>
                                <option value="examenprogramma_kop3">examenprogramma_kop3</option>
                                <option value="examenprogramma_kop4">examenprogramma_kop4</option>
                                <option value="examenprogramma_body">examenprogramma_body</option>
                                <option value="examenprogramma_vakleergebied">examenprogramma_vakleergebied</option>
                                <option value="kerndoel">kerndoel</option>
                                <option value="kerndoel_domein">kerndoel_domein</option>
                                <option value="kerndoel_uitstroomprofiel">kerndoel_uitstroomprofiel</option>
                                <option value="kerndoel_vakleergebied">kerndoel_vakleergebied</option>
                                <option value="syllabus">syllabus</option>
                                <option value="syllabus_vakbegrip">syllabus_vakbegrip</option>
                                <option value="syllabus_toelichting">syllabus_toelichting</option>
                                <option value="syllabus_specifieke_eindterm">syllabus_specifieke_eindterm</option>
                                <option value="leerlingtekst">leerlingtekst</option>
                                <option value=""></option>

                            </select>
                        </span>
                    </header>
                    <div class="slo-card-body" data-simply-field="entity.section" data-simply-content="template" data-simply-default-value="default">
                        <template data-simply-template="vakkencluster" rel="entiteit-vakkencluster"></template>
                        <template data-simply-template="leerlijn" rel="entiteit-leerlijn"></template>
                        <template data-simply-template="vak" rel="entiteit-vak"></template>
                        <template data-simply-template="vakkern" rel="entiteit-vakkern"></template>
                        <template data-simply-template="vaksubkern" rel="entiteit-vaksubkern"></template>
                        <template data-simply-template="vakinhoud" rel="entiteit-vakinhoud"></template>
                        <template data-simply-template="doelniveau" rel="entiteit-doelniveau"></template>
                        <template data-simply-template="doel" rel="entiteit-doel"></template>
                        <template data-simply-template="niveau" rel="entiteit-niveau"></template>
                        <template data-simply-template="examenprogramma" rel="entiteit-examenprogramma"></template>
                        <template data-simply-template="examenprogramma_domein" rel="entiteit-examenprogramma_domein"></template>
                        <template data-simply-template="examenprogramma_subdomein" rel="entiteit-examenprogramma_subdomein"></template>
                        <template data-simply-template="examenprogramma_eindterm" rel="entiteit-examenprogramma_eindterm"></template>
                        <template data-simply-template="examenprogramma_kop1" rel="entiteit-examenprogramma_kop1"></template>
                        <template data-simply-template="examenprogramma_kop2" rel="entiteit-examenprogramma_kop2"></template>
                        <template data-simply-template="examenprogramma_kop3" rel="entiteit-examenprogramma_kop3"></template>
                        <template data-simply-template="examenprogramma_kop4" rel="entiteit-examenprogramma_kop4"></template>
                        <template data-simply-template="examenprogramma_body" rel="entiteit-examenprogramma_body"></template>
                        <template data-simply-template="examenprogramma_vakleergebied" rel="entiteit-examenprogramma_vakleergebied"></template>
                        <template data-simply-template="kerndoel" rel="entiteit-kerndoel"></template>
                        <template data-simply-template="kerndoel_domein" rel="entiteit-kerndoel_domein"></template>
                        <template data-simply-template="kerndoel_uitstroomprofiel" rel="entiteit-kerndoel_uitstroomprofiel"></template>
                        <template data-simply-template="kerndoel_vakleergebied" rel="entiteit-kerndoel_vakleergebied"></template>
                        <template data-simply-template="syllabus" rel="entiteit-syllabus"></template>
                        <template data-simply-template="syllabus_vakbegrip" rel="entiteit-syllabus_vakbegrip"></template>
                        <template data-simply-template="syllabus_toelichting" rel="entiteit-syllabus_toelichting"></template>
                        <template data-simply-template="syllabus_specifieke_eindterm" rel="entiteit-syllabus_specifieke_eindterm"></template>
                        <template data-simply-template="leerlingtekst" rel="entiteit-leerlingtekst"></template>
                    </div>
                </article>
            </template>
            </div>
            <div class="">
                <div class="slo-form-field">
                    <label class="slo-form-checkbox">
                        <input type="checkbox" name="dirty" id="dirty" value="1" data-simply-field="entity.dirty"> <span class="slo-label">Inhoudelijk gewijzigd sinds de vorige release.</span>
                    </label>
                    <div class="slo-form-help">
                        Als dit vinkje aan staat, betekend het dat deze entiteit bij de volgende release een nieuwe UUID krijgt. Het is belangrijk dat dit altijd gebeurd bij inhoudelijke wijzigingen. Alleen als je bijv. een typefout corrigeert mag je dit vinkje uitzetten. Let erop dat je dit alleen doet als
                        het vinkje voor de correctie al uit stond.
                    </div>
                </div>
            </div>
        </div>
    </main>

    <dialog id="login" class="slo-login" open>
        <header class="bg-brand">
            <img src="/assets/img/slo.png" class="slo-logo">
        </header>
        <section class="body">
            <div class="slo-warning" data-simply-field="login-error"></div>
            <div class="slo-warning">Aanmelden met uw Github account</div>
            <form data-simply-command="login" method="POST">
                <div class="group">
                    <label>
                        Naam
                        <input type="text" name="username" id="username" data-simply-field="username" data-simply-element="username">
                    </label>
                </div>
                <div class="group">
                    <label>
                        Wachtwoord
                        <input type="password" name="password" data-simply-field="password" data-simply-element="password">
                    </label>
                </div>
                <br>
                <button type="submit" class="slo-button slo-button-primary">Login
                    <div class="ripples buttonRipples"><span class="ripplesCircle"></span></div>
                </button>
            </form>
        </section>
    </dialog>
    
    <div class="slo-dialog-overlay"></div>


<script src="https://canary.simplyedit.io/1/simply-edit.js" xsrc="https://yvo.muze.nl/simply-edit/js/simply-edit.js" xsrc="https://cdn.simplyedit.io/1/simply-edit.js" data-simply-storage="none"></script>
<script src="https://unpkg.com/github-api/dist/GitHub.bundle.js"></script>
<script src="/assets/simplyview/dist/simply.everything.js"></script>
<script src="/assets/simplyview/js/simply.activate.js"></script>
<script src="/js/curriculum.js"></script>
<script>
	simply.bind = false;
    var gotoHash = function() {
        var path = document.location.pathname + document.location.hash;
        path = path.replace(/\/$/, '');
        simply.route.match(path);
    };
    window.addEventListener("hashchange", gotoHash);

    simply.bind = false;

    var reverseDoelIndex = {};
    var hierarchies = {
        'doel': {
            'vak':['vakkern_id','doelniveau_id'],
            'vakkern':['vaksubkern_id','doelniveau_id'],
            'vaksubkern':['vakinhoud_id','doelniveau_id'],
            'vakinhoud':['doelniveau_id'],
            'doelniveau':['doel_id'] // ,'niveau_id']
        },
        'examenprogramma': {
            'examenprogramma':['examenprogramma_domein_id','examenprogramma_kop1_id'],
            'examenprogramma_domein':['examenprogramma_eindterm_id', 'examenprogramma_subdomein_id'],
            'examenprogramma_subdomein':['examenprogramma_eindterm_id'],
            'examenprogramma_kop1':['examenprogramma_kop2_id', 'examenprogramma_body_id'],
            'examenprogramma_kop2':['examenprogramma_kop3_id', 'examenprogramma_body_id'],
            'examenprogramma_kop3':['examenprogramma_kop4_id', 'examenprogramma_body_id'],
            'examenprogramma_kop4':['examenprogramma_body_id']
        },
        'kerndoelen': {
            'kerndoel_domein' : ['kerndoel_id'],
            'kerndoel_vakleergebied' : ['kerndoel_uitstroomprofiel_id', 'kerndoel_id', 'kerndoel_domein_id']
        }
    };
    function walk(hierarchy, node, parents, callback) {
        var hier = hierarchies[hierarchy];
        var type = node.section;
        callback(node, parents);
        var childParents = parents.slice();
        childParents.push(node);
        if (hier[type]) {
            hier[type].forEach(function(prop) {
                if (node[prop]) {
                    node[prop].forEach(function(childId) {
                        walk(hierarchy, curriculum.index.id[childId], childParents, callback);
                    });
                }
            });
        }
    }

    editor.transformers = {
        "round" : {
            "render" : function(data) {
                return Math.round(100 * (1-data),2) + "%";
            }
        },
        "opendatalink" : {
            "render" : function(data) {
                this.href="https://opendata.slo.nl/curriculum/uuid/"+data;
                this.innerHTML = data;
                return data;
            }
        },
        "editlink" : {
            "render" : function(data) {
                return {
                    innerHTML : data,
                    href : document.location.pathname + "#edit/" + data
                };
            },
            "extract" : function(el) {
                return el.innerHTML;
            }
        },
        "uuid": {
            "render": function(data) {
                this.id = data;
                return data;
            }
        },
        "idToTitle": {
            "render" : function(data) {
                this.sloId = data;
                var entity = curriculum.index.id[data];
                if (curriculum.index.type[data] == "doelniveau") {
                    var doel = curriculum.index.id[entity.doel_id[0]];
                    var niveau = curriculum.index.id[entity.niveau_id[0]];
                    return "[" + niveau.title + "] " + doel.title;
                } else {
                    return curriculum.index.id[data].title ? curriculum.index.id[data].title : "";
                }
            },
            "extract" : function(el) {
                return this.sloId;
            }
        },
        "hasDescription" : {
            render : function(data) {
                return (typeof data.description !== "undefined");
            }
        },
        "hasTitle" : {
            render : function(data) {
                return (typeof data.title !== "undefined");
            }
        },
        "isarray" : {
            render : function(data) {
                this.data = data;
                return Array.isArray(data);
            },
            extract : function(el) {
                return this.data;
            }
        },
        "searchoption" : {
            render : function(entity) {
                this.data = entity;
                var option = entity.title + " " + entity.id;

                if (curriculum.index.type[entity.id]=="doelniveau") {
                    var doel = curriculum.index.id[entity.doel_id[0]];
                    var niveau = curriculum.index.id[entity.niveau_id[0]];
                    option = "[" + niveau.title + "] " + doel.title + " " + entity.id;
                }

                return {
                    innerHTML : option,
                    value : entity.id
                };
            },
            extract : function(el) {
                return this.data;
            }
        }
    };

    var emptyEntity = {
        vakkern_id : [],
        vaksubkern_id : [],
        vakinhoud_id : [],
        doelniveau_id : [],
        doel_id : [],
        niveau_id : [],
        section: null,
        id: null,
        dirty: 0
    };

    var entityEditor = simply.app({
        container: document.body,
        routes : {
            '/#edit/:id' : function(params) {
                // reset page;
                editor.pageData.entity = emptyEntity;
                editor.pageData.entity = clone(curriculum.index.id[params.id]);
		if (typeof editor.pageData.entity.dirty === "undefined") {
			editor.pageData.entity.dirty = 0;
		}
                editor.pageData.page = "edit";
                window.scrollTo(0,0);
            },
            '/#edit/' : function(params) {
                // reset page;
                editor.pageData.entity = emptyEntity;
                editor.pageData.page = "edit";
                window.scrollTo(0,0);
            },
            '/#new/' : function(params) {
                // reset page;
                editor.pageData.entity = emptyEntity;
                editor.pageData.page = "new";
                window.scrollTo(0,0);
            }
        },
        commands: {
            login: function(form, values) {
                document.body.dataset.loading="true";
                return entityEditor.actions.start(values.username, values.password)
                .then(function() {
                    document.body.dataset.loading="false";
                    document.getElementById('login').removeAttribute('open');
                    entityEditor.view['login-error'] = '';
                    return true;
                })
                .catch(function(error) {
                    entityEditor.view['login-error'] = 'Login failed';
                    document.body.dataset.loading="false";
                    return false;
                });
            },
            'search': function(el) {
                var searchText = el.parentNode.querySelector("input").value;
                return entityEditor.actions.search(searchText);
            },
            'new': function(el) {
                simply.route.goto('/#new');
            },
            'delete-relation' : function(el) {
                el.parentNode.parentNode.removeChild(el.parentNode);
            },
            'add-relation' : function(el) {
                var relationId = el.parentNode.querySelector("input").value;
                var relation = el.getAttribute("data-slo-relation");
                if (editor.pageData.entity[relation] == null) {
                    editor.pageData.entity[relation] = [];
                }
                editor.pageData.entity[relation].push(relationId);
            },
            'delete-change' : function(el) {
                // find the id of the entity;
                var id = el.parentNode.parentNode.querySelector("a").innerHTML;
                if (curriculum.index.id[id]) {
                    // find the original entity from the dataset;
                    var original = curriculum.data[curriculum.index.type[id]].find(function(entry) {
                        if (entry.id == id) {
                            return true;
                        }
                        return false;
                    });
                    curriculum.index.id[id] = original; 
                }

                el.parentNode.parentNode.removeChild(el.parentNode);
                editor.pageData.changeCount = editor.pageData.changes.length;
                localStorage.changes = JSON.stringify(editor.pageData.changes);

                // reload the page to show the changes;
                var entityId = editor.pageData.entity.id;
                simply.route.goto(document.location.pathname + "#edit/");
                simply.route.goto(document.location.pathname + "#edit/" + entityId);
            },
            'commit-changes' : function() {
                document.body.dataset.loading="true";
                entityEditor.actions['commit-changes'](editor.pageData.changes, editor.pageData.commitMessage)
                .then(function(done) {
                    done.sort().reverse().forEach(function(changeIndex) {
                        editor.pageData.changes.splice(changeIndex, 1);
                    })
                    editor.pageData.changeCount = editor.pageData.changes.length;
                    localStorage.changes = JSON.stringify(editor.pageData.changes);
                    document.body.dataset.loading="false";
                })
                .catch(function(error) {
                    document.body.dataset.loading="false";
                    alert(error);
                });
            },
            'save' : function() {
                if (!editor.pageData.entity.id) {
                    editor.pageData.entity.id = curriculum.uuidv4();
                }

                editor.pageData.changes = editor.pageData.changes.filter(function(entry) {
                    if (editor.pageData.entity.id == entry.id) {
                        return false;
                    }
                    return true;
                });
                editor.pageData.changes.push(clone(editor.pageData.entity));
                curriculum.index.id[editor.pageData.entity.id] = clone(editor.pageData.entity);
                editor.pageData.changeCount = editor.pageData.changes.length;
                localStorage.changes = JSON.stringify(editor.pageData.changes);
            }
        },
        actions: {
            'search': function(searchText) {
                  if (curriculum.index.id[searchText]) {
                      simply.route.goto(document.location.pathname + "#edit/" + searchText);
                  }
            },
            'commit-changes': function(changes, message) {
                if (!message) {
                    return Promise.reject('Commit message required');
                }
                var done = [];
                var schemas = {};
                changes.forEach(function(change, changeIndex) {
                    var id = change.id;
                    var original = curriculum.data[curriculum.index.type[id]].find(function(entry) {
                        if (entry.id == id) {
                            return true;
                        }
                        return false;
                    });
                    delete change.section;
                    delete change.parents;
                    if (original) {
                        var index = curriculum.data[curriculum.index.type[id]].indexOf(original);
                        curriculum.data[curriculum.index.type[id]][index] = change;
                    } else {
                        curriculum.data[curriculum.index.type[id]].push(change);
                    }
                    var section = curriculum.index.type[change.id];
                    var schema = curriculum.getSchemaFromType(section);
                    if (!schemas[schema]) {
                        schemas[schema] = [];
                    }
                    schemas[schema].push(section);
                    done.push(changeIndex);
                });
                var files = [];
                Object.keys(schemas).forEach(function(schema) {
                    schemas[schema].forEach(function(section) {
                        var filename = curriculum.schemas[schema].properties[section]['#file'];
                        files.push({ path: filename, data: JSON.stringify(curriculum.data[section], null, "\t"), schema: schema});
                    });
                });
                return new Promise(function(resolve, reject) {
                    var errors = {};
                    var writeFile = function() {
                        if (!files.length) {
                            if (Object.keys(errors).length) {
                                //FIXME: some changes may have been committed correctly...
                                return reject(errors);
                            } else {
                                return resolve(done);
                            }
                        }
                        var file = files.shift();
                        return curriculum.sources[file.schema].writeFile(file.path, file.data, message).then(writeFile);
                    }
                    writeFile();
                });
//              return curriculum.sources[schema].writeFiles(files, message);
            },
            start: function(user, pass) {
                var schemas = {
                    'curriculum-inhouden': 'slonl/curriculum-inhouden',
                    'curriculum-doelen': 'slonl/curriculum-doelen',
                    'curriculum-kerndoelen': 'slonl/curriculum-kerndoelen',
                    'curriculum-examenprogramma': 'slonl/curriculum-examenprogramma',
                    'curriculum-syllabus': 'slonl/curriculum-syllabus',
                    'curriculum-doelgroepteksten': 'slonl/curriculum-doelgroepteksten'
                };
                var loading = [];
                Object.keys(schemas).forEach(function(schema) {
                    loading.push(
                        curriculum.loadContextFromGithub(schema, schemas[schema], user, pass)
                        .then(function() {
                            return curriculum.loadData(schema);
                        })
                    );
                });

                return Promise.all(loading)
                .then(function() {
                    Object.values(curriculum.index.id).forEach(function(entity) {
                        entity.section = curriculum.index.type[entity.id];
                    });

                    Object.keys(curriculum.data).forEach(function(dataset) {
                        editor.addDataSource(dataset, {
                            load : function(el, callback) {
                                document.body.dataset.loading = "true";
                                var options = '';
                                curriculum.data[dataset].forEach(function(entity) {
                                    var option = entity.title + " " + entity.id;

                                    if (curriculum.index.type[entity.id] == "doelniveau") {
	                                    var doel;
	                                    var niveau;
	                                    if (entity.doel_id) {
	                                        doel = curriculum.index.id[entity.doel_id[0]];
	                                    }
	                                    if (entity.kerndoel_id) {
	                                        doel = curriculum.index.id[entity.kerndoel_id[0]];
	                                    }
	                                    if (entity.eindterm_id) {
	                                        doel = curriculum.index.id[entity.eindterm_id[0]];
	                                    }
	                                    if (entity.niveau_id) {
	                                        niveau = curriculum.index.id[entity.niveau_id[0]];
	                                    }
	                                    if (doel && niveau) {
	                                        option = "[" + niveau.title + "] " + doel.title + " " + entity.id;
	                                    }
                                    }

                                    options += "<option value='" + entity.id + "'>" + option + "</option>";
                                });
                                window.setTimeout(function() {
                                    el.innerHTML = options;
                                    document.body.dataset.loading = "false";
                                });
                            }
                        });
                    });

                    var parentInfo = {
                        'vak' : 'doel',
                        'examenprogramma' : 'examenprogramma',
                        'kerndoel_vakleergebied': 'kerndoelen'
                    };
                    Object.keys(parentInfo).forEach(function(section) {
                        curriculum.data[section].forEach(function(vakEntity) {
                            walk(parentInfo[section], vakEntity, [], function(entity, parents) {
                                entity.parents = parents.map(function(parent) {
                                    return clone(parent.id);
                                }).filter(Boolean).map(function(id) {
                                    return { id: id }
                                });
                            });
                        });
                    });

                    editor.addDataSource("entities", {
                        load : function(el, callback) {
                            document.body.dataset.loading = "true";
                            var options = '';

                            // Priorities for sorting - we want the higher level entities to come first in the list.
                            var priorities = {
                                "vak" : 3,
                                "leerlijn" : 2,
                                "examenprogramma" : 1
                            };

                            Object.values(curriculum.index.id)
                            .sort(function(a, b) {
                                if (priorities[a.section]) {
                                    if (priorities[b.section]) {
                                        if (priorities[a.section] > priorities[b.section]) {
                                            return -1;
                                        }
                                        if (priorities[a.section] < priorities[b.section]) {
                                            return 1;
                                        }
                                        if (a.title > b.title) {
                                            return 1;
                                        }
                                        if (a.title < b.title) {
                                            return -1;
                                        }
                                    } else {
                                        return -1;
                                    }
                                }
                                if (priorities[b.section]) {
                                    return 1;
                                }
                                return 0;
                            }).forEach(function(entity) {
                                var option = entity.title + " " + entity.id;

                                if (curriculum.index.type[entity.id] == "doelniveau") {
                                    var doel;
                                    var niveau;
                                    if (entity.doel_id) {
                                        doel = curriculum.index.id[entity.doel_id[0]];
                                    }
                                    if (entity.kerndoel_id) {
                                        doel = curriculum.index.id[entity.kerndoel_id[0]];
                                    }
                                    if (entity.eindterm_id) {
                                        doel = curriculum.index.id[entity.eindterm_id[0]];
                                    }
                                    if (entity.niveau_id) {
                                        niveau = curriculum.index.id[entity.niveau_id[0]];
                                    }
                                    if (doel && niveau) {
                                        option = "[" + niveau.title + "] " + doel.title + " " + entity.id;
                                    }
                                }

                                options += "<option value='" + entity.id + "'>" + option + "</option>";
                            });
                            window.setTimeout(function() {
                                el.innerHTML = options;
                                document.body.dataset.loading = "false";
                            });
                        }
                    });
                })
                .then(function() {
                    // restore changes from localstorage;
                    if (localStorage.changes) {
                        editor.pageData.changes = JSON.parse(localStorage.changes);
                        editor.pageData.changeCount = editor.pageData.changes.length;
                        editor.pageData.changes.forEach(function(entry) {
                            curriculum.index.id[entry.id] = clone(entry);
                        });
                    }
                })
                .then(function() {
                    document.body.dataset.loading = "false";
                    gotoHash();
                });

            }
        }
    });

    function clone(ob) {
        if (typeof ob == 'undefined' || ob == null) {
            return null;
        }
        return JSON.parse(JSON.stringify(ob));
    }


    // Yucky code, but chrome handles large datalists very poorly. This is to make it only do autocompletion
    // when enough characters have been entered. Firefox doesn't even break a sweat with this;
    if (window.chrome) {
        document.addEventListener("input", function(evt) {
            if (evt.target.hasAttribute("list") && !evt.target.hasAttribute("data-list")) {
                evt.target.setAttribute("data-list", evt.target.getAttribute("list"));
            }
            if (evt.target.getAttribute("data-list")) {
                if (evt.target.value.length > 3) {
                    evt.target.setAttribute("list", evt.target.getAttribute("data-list"));
                } else {
                    evt.target.removeAttribute("list");
                }
            }
        }, true);
    }


	simply.activate.addListener('autosize', function() {
		var self = this;
        self.style.height = 'auto';
        self.style.height = (self.scrollHeight+2)+'px';
	   	this.addEventListener('input',function(evt) {
	        window.setTimeout(function() {
	            self.style.height = 'auto';
	            self.style.height = (self.scrollHeight+2)+'px';
	        },0);
	    });
	});
</script>
</body>
</html>